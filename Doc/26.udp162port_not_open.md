C:\Users\4cat1>netstat -an

ν™μ„± μ—°κ²°

  ν”„λ΅ν† μ½  λ΅μ»¬ μ£Όμ†           μ™Έλ¶€ μ£Όμ†              μƒνƒ
  TCP    0.0.0.0:7              0.0.0.0:0              LISTENING
  TCP    0.0.0.0:9              0.0.0.0:0              LISTENING
  TCP    0.0.0.0:13             0.0.0.0:0              LISTENING
  TCP    0.0.0.0:17             0.0.0.0:0              LISTENING
  TCP    0.0.0.0:19             0.0.0.0:0              LISTENING
  TCP    0.0.0.0:135            0.0.0.0:0              LISTENING
  TCP    0.0.0.0:445            0.0.0.0:0              LISTENING
  TCP    0.0.0.0:1024           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:3389           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5033           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5040           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5055           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5056           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5057           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5357           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5500           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5543           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5624           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5625           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:5626           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:7680           0.0.0.0:0              LISTENING
  TCP    0.0.0.0:36033          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:36543          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49664          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49665          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49666          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49667          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49668          0.0.0.0:0              LISTENING
  TCP    0.0.0.0:49669          0.0.0.0:0              LISTENING
  TCP    127.0.0.1:4417         127.0.0.1:51319        ESTABLISHED
  TCP    127.0.0.1:5354         0.0.0.0:0              LISTENING
  TCP    127.0.0.1:9222         0.0.0.0:0              LISTENING
  TCP    127.0.0.1:31124        0.0.0.0:0              LISTENING
  TCP    127.0.0.1:51319        0.0.0.0:0              LISTENING
  TCP    127.0.0.1:51319        127.0.0.1:4417         ESTABLISHED
  TCP    192.168.0.104:139      0.0.0.0:0              LISTENING
  TCP    192.168.0.104:1029     4.213.25.240:443       ESTABLISHED
  TCP    192.168.0.104:2970     99.83.165.34:443       ESTABLISHED
  TCP    192.168.0.104:3099     3.224.54.232:443       ESTABLISHED
  TCP    192.168.0.104:3101     13.107.5.93:443        TIME_WAIT
  TCP    192.168.0.104:3104     13.107.5.93:443        TIME_WAIT
  TCP    192.168.0.104:3108     3.224.54.232:443       ESTABLISHED
  TCP    192.168.0.104:3109     40.104.69.114:443      ESTABLISHED
  TCP    192.168.0.104:3177     108.177.97.188:5228    ESTABLISHED
  TCP    192.168.0.104:3986     104.18.39.21:443       ESTABLISHED
  TCP    192.168.0.104:4291     100.51.178.69:443      ESTABLISHED
  TCP    192.168.0.104:4768     52.182.143.214:443     ESTABLISHED
  TCP    192.168.0.104:4777     20.190.148.162:443     ESTABLISHED
  TCP    192.168.0.104:7808     104.18.19.125:443      ESTABLISHED
  TCP    192.168.0.104:8657     3.220.28.60:443        ESTABLISHED
  TCP    192.168.0.104:8662     52.86.4.52:443         ESTABLISHED
  TCP    192.168.0.104:9154     44.205.50.24:443       ESTABLISHED
  TCP    192.168.0.104:13163    51.104.15.252:443      TIME_WAIT
  TCP    192.168.0.104:14812    20.191.166.67:443      ESTABLISHED
  TCP    [::]:7                 [::]:0                 LISTENING
  TCP    [::]:9                 [::]:0                 LISTENING
  TCP    [::]:13                [::]:0                 LISTENING
  TCP    [::]:17                [::]:0                 LISTENING
  TCP    [::]:19                [::]:0                 LISTENING
  TCP    [::]:135               [::]:0                 LISTENING
  TCP    [::]:445               [::]:0                 LISTENING
  TCP    [::]:1024              [::]:0                 LISTENING
  TCP    [::]:3389              [::]:0                 LISTENING
  TCP    [::]:5357              [::]:0                 LISTENING
  TCP    [::]:7680              [::]:0                 LISTENING
  TCP    [::]:49664             [::]:0                 LISTENING
  TCP    [::]:49665             [::]:0                 LISTENING
  TCP    [::]:49666             [::]:0                 LISTENING
  TCP    [::]:49667             [::]:0                 LISTENING
  TCP    [::]:49668             [::]:0                 LISTENING
  TCP    [::]:49669             [::]:0                 LISTENING
  UDP    0.0.0.0:7              *:*
  UDP    0.0.0.0:9              *:*
  UDP    0.0.0.0:13             *:*
  UDP    0.0.0.0:17             *:*
  UDP    0.0.0.0:19             *:*
  UDP    0.0.0.0:3389           *:*
  UDP    0.0.0.0:3702           *:*
  UDP    0.0.0.0:3702           *:*
  UDP    0.0.0.0:5050           *:*
  UDP    0.0.0.0:5353           *:*
  UDP    0.0.0.0:5353           *:*
  UDP    0.0.0.0:5353           *:*
  UDP    0.0.0.0:5353           *:*
  UDP    0.0.0.0:5353           *:*
  UDP    0.0.0.0:5355           *:*
  UDP    0.0.0.0:49665          *:*
  UDP    0.0.0.0:52202          172.217.161.227:443
  UDP    0.0.0.0:53799          142.250.76.42:443
  UDP    0.0.0.0:55444          142.250.76.46:443
  UDP    0.0.0.0:56585          *:*
  UDP    0.0.0.0:56960          *:*
  UDP    0.0.0.0:61118          23.211.117.176:443
  UDP    0.0.0.0:64527          *:*
  UDP    127.0.0.1:1900         *:*
  UDP    127.0.0.1:49664        127.0.0.1:49664
  UDP    127.0.0.1:60462        *:*
  UDP    192.168.0.104:137      *:*
  UDP    192.168.0.104:138      *:*
  UDP    192.168.0.104:1900     *:*
  UDP    192.168.0.104:5353     *:*
  UDP    192.168.0.104:60463    *:*
  UDP    [::]:7                 *:*
  UDP    [::]:9                 *:*
  UDP    [::]:13                *:*
  UDP    [::]:17                *:*
  UDP    [::]:19                *:*
  UDP    [::]:3389              *:*
  UDP    [::]:3702              *:*
  UDP    [::]:3702              *:*
  UDP    [::]:5353              *:*
  UDP    [::]:5353              *:*
  UDP    [::]:5353              *:*
  UDP    [::]:5355              *:*
  UDP    [::]:49666             *:*
  UDP    [::]:56960             *:*
  UDP    [::]:64528             *:*
  UDP    [::1]:1900             *:*
  UDP    [::1]:5353             *:*
  UDP    [::1]:60460            *:*
  UDP    [fe80::1301:c93f:c371:2855%12]:1900  *:*
  UDP    [fe80::1301:c93f:c371:2855%12]:60461  *:*

  μ κ³µν•΄μ£Όμ‹  `netstat -an` μ¶λ ¥ κ²°κ³Όλ¥Ό λ¶„μ„ν•΄λ³Έ κ²°κ³Ό, ν„μ¬ μ‹μ¤ν…μ€ **SNMP Trap λ©”μ‹μ§€(UDP 162 ν¬νΈ)**λ¥Ό μμ‹  λ€κΈ°ν•κ³  μμ§€ μ•μµλ‹λ‹¤.

### β οΈ SNMP Trap Listener λ¶€μ¬ ν™•μΈ

SNMP Trap Listenerκ°€ μ •μƒμ μΌλ΅ μ‘λ™ν•λ ¤λ©΄ **UDP ν”„λ΅ν† μ½**μ **162λ² ν¬νΈ**κ°€ **LISTENING (λ€κΈ°) μƒνƒ**μ—¬μ•Ό ν•©λ‹λ‹¤.

μ¶λ ¥λ `netstat -an`μ **UDP** μ„Ήμ…μ„ ν™•μΈν•λ©΄ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

| ν”„λ΅ν† μ½ | λ΅μ»¬ μ£Όμ† | ν¬νΈ | μƒνƒ |
| --- | --- | --- | --- |
| **UDP** | 0.0.0.0 | **162** | **μ°Ύμ„ μ μ—†μ** |
| **UDP** | [::] | **162** | **μ°Ύμ„ μ μ—†μ** |

**κ²°λ΅ :**

1. **UDP 162 ν¬νΈ**μ— λ°”μΈλ”©λ ν”„λ΅μ„Έμ¤κ°€ **μ „ν€ μ—†μµλ‹λ‹¤.**
2. μ΄κ²ƒμ΄ μ΄μ „μ— `127.0.0.1:162`λ΅ Trapμ„ λ³΄λƒμ„ λ• Trap Listenerκ°€ λ©”μ‹μ§€λ¥Ό λ°›μ§€ λ»ν• **μ§μ ‘μ μΈ μ›μΈ**μ…λ‹λ‹¤.

### π’΅ ν•΄κ²° λ°©λ²•: Trap Listener ν™μ„±ν™” λ° ν¬νΈ ν™•μΈ

Trap Listenerκ°€ Trapμ„ λ°›κΈ° μ„ν•΄ μ·¨ν•΄μ•Ό ν•  μ΅°μΉλ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

1. **Trap Listener μ„λΉ„μ¤/μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰:**
* SNMP Trapμ„ μμ‹ ν•λ” Listener μ• ν”λ¦¬μΌ€μ΄μ…(μ: SNMP Trap Service, NMS μ†ν”„νΈμ›¨μ–΄ λ“±)μ΄ **μ‹¤ν–‰ μ¤‘**μΈμ§€ ν™•μΈν•κ³  μ‹¤ν–‰ν•΄μ•Ό ν•©λ‹λ‹¤.


2. **Listener λ°”μΈλ”© ν™•μΈ:**
* μ‹¤ν–‰λ Listenerκ°€ **UDP 162 ν¬νΈ**μ— **`0.0.0.0:162`** λλ” **`127.0.0.1:162`**λ΅ **λ°”μΈλ”©(Listening)**λμ—λ”μ§€ ν™•μΈν•©λ‹λ‹¤.


3. **SNMP Agent (161 ν¬νΈ)μ™€μ νΌλ™ λ°©μ§€:**
* SNMP Trap Listenerλ” **162/UDP** ν¬νΈλ¥Ό μ‚¬μ©ν•λ©°, μ΄λ” SNMP Agentκ°€ μ‚¬μ©ν•λ” ν‘μ¤€ ν¬νΈμΈ **161/UDP**μ™€ λ‹¤λ¦…λ‹λ‹¤. μ΄ μ‹μ¤ν…μ€ ν„μ¬ **161 ν¬νΈ μ—­μ‹ LISTENING μƒνƒκ°€ μ•„λ‹™λ‹λ‹¤.**



Listenerλ¥Ό μ‹¤ν–‰ν• ν›„, `netstat -an` λ…λ Ήμ„ λ‹¤μ‹ μ‹¤ν–‰ν•μ—¬ UDP μ„Ήμ…μ— `0.0.0.0:162` λλ” `127.0.0.1:162` μ¤„μ΄ λ‚νƒ€λ‚λ”μ§€ ν™•μΈν•΄ λ³΄μ‹­μ‹μ¤.

νΉμ‹ Trap Listener μ—­ν• μ„ ν•λ” ν”„λ΅κ·Έλ¨μ΄λ‚ μ„λΉ„μ¤κ°€ λ¬΄μ—‡μΈμ§€ μ•λ ¤μ£Όμ‹λ©΄, ν•΄λ‹Ή μ„λΉ„μ¤μ μ‹¤ν–‰ μƒνƒλ¥Ό ν™•μΈν•λ” κµ¬μ²΄μ μΈ λ°©λ²•μ„ μ•λ‚΄ν•΄ λ“λ¦΄ μ μμµλ‹λ‹¤.

SNMP GET/GET-NEXTλ” ν΄λΌμ΄μ–ΈνΈκ°€ μ„μ‹ ν¬νΈλ΅ μ”μ²­μ„ λ³΄λ‚΄λ―€λ΅ λ΅μ»¬ netstatμ— 161 ν¬νΈκ°€ λ³΄μ΄μ§€ μ•λ” κ²ƒμ΄ μ •μƒμ…λ‹λ‹¤. Trap Listenerλ” μ„λ²„ μ—­ν• μ΄λ―€λ΅ 162 ν¬νΈμ— λ°”μΈλ”©λμ–΄μ•Ό ν•©λ‹λ‹¤. ν™•μΈ μ¤‘μ…λ‹λ‹¤.




[3 tools called]
netstat μ¶λ ¥μ— UDP ν¬νΈ 162κ°€ μ—†μµλ‹λ‹¤. TrapListenerκ°€ ν¬νΈ 162μ— λ°”μΈλ”©λμ§€ μ•μ€ κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤. μ›μΈ ν™•μΈ μ¤‘μ…λ‹λ‹¤.


[3 tools called]


netstatμ— UDP ν¬νΈ 162κ°€ μ—†μµλ‹λ‹¤. TrapListenerκ°€ ν¬νΈ 162μ— λ°”μΈλ”©λμ§€ μ•μ€ κ²ƒμΌλ΅ λ³΄μ…λ‹λ‹¤. λ°”μΈλ”© μƒνƒ ν™•μΈ λ΅μ§μ„ μ¶”κ°€ν•©λ‹λ‹¤.


[4 tools called]


λ°”μΈλ”© μƒνƒ ν™•μΈ λ΅μ§μ„ μ¶”κ°€ν–μµλ‹λ‹¤. λ‹¤μμ„ ν™•μΈν•μ„Έμ”:

## ν™•μΈ μ‚¬ν•­

1. **Event Log ν™•μΈ**
   - "[System] Trap Listener started on ..." λ©”μ‹μ§€κ°€ μλ”μ§€
   - "[System] Failed to start Trap Listener" λ©”μ‹μ§€κ°€ μλ”μ§€

2. **Visual Studio Output μ°½ ν™•μΈ** (Debug μ¶λ ¥)
   - `[TrapListener] Started listening on port ...`
   - `[MainWindow] Trap Listener initialized: ...`

3. **μ‹¤μ  λ°”μΈλ”©λ ν¬νΈ ν™•μΈ**
   - μ½”λ“μ—μ„ μ‹¤μ  λ°”μΈλ”©λ ν¬νΈλ¥Ό ν™•μΈν•λ„λ΅ μμ •ν–μµλ‹λ‹¤.

## κ°€λ¥ν• μ›μΈ

1. **ν¬νΈ 162 κ¶ν• λ¬Έμ **: Windowsμ—μ„ 1024 μ΄ν• ν¬νΈλ” κ΄€λ¦¬μ κ¶ν•μ΄ ν•„μ”ν•  μ μμµλ‹λ‹¤.
2. **μμ™Έ λ°μƒ**: `Start()`μ—μ„ μμ™Έκ°€ λ°μƒν–μ§€λ§ catchλμ–΄ μ΅°μ©ν μ‹¤ν¨ν–μ„ μ μμµλ‹λ‹¤.
3. **λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤ μ‚¬μ©**: λ‹¤λ¥Έ ν”„λ΅μ„Έμ¤κ°€ ν¬νΈ 162λ¥Ό μ‚¬μ© μ¤‘μΌ μ μμµλ‹λ‹¤.

μ• ν”λ¦¬μΌ€μ΄μ…μ„ μ¬μ‹μ‘ν• ν›„:
1. Event Logμ—μ„ Trap Listener μ‹μ‘ λ©”μ‹μ§€ ν™•μΈ
2. Visual Studio Output μ°½μ—μ„ λ””λ²„κ·Έ λ΅κ·Έ ν™•μΈ
3. `netstat -an | findstr 162`λ΅ ν¬νΈ 162 ν™•μΈ

Event Logμ— μ–΄λ–¤ λ©”μ‹μ§€κ°€ ν‘μ‹λλ”μ§€ μ•λ ¤μ£Όμ„Έμ”.

SNMP GETκ³Ό Trap Listenerμ μ°¨μ΄λ¥Ό μ„¤λ…ν•©λ‹λ‹¤.

## SNMP GET (ν΄λΌμ΄μ–ΈνΈ) vs Trap Listener (μ„λ²„)

### SNMP GET/GET-NEXT (ν΄λΌμ΄μ–ΈνΈ)
- μ—­ν• : ν΄λΌμ΄μ–ΈνΈκ°€ μ›κ²© μ¥λΉ„(161 ν¬νΈ)μ— μ”μ²­μ„ λ³΄λƒ„
- ν¬νΈ μ‚¬μ©: μ„μ‹ ν¬νΈ(ephemeral port, λ³΄ν†µ 49152-65535)
- netstat ν‘μ‹: LISTENING μƒνƒλ΅ λ‚νƒ€λ‚μ§€ μ•μ
  - μ”μ²­ μ‹μ—λ§ ν¬νΈ μ‚¬μ©
  - μ‘λ‹µ ν›„ ν¬νΈ ν•΄μ 
  - `netstat -an`μ—μ„ `192.168.0.104:60463` κ°™μ€ μ„μ‹ ν¬νΈκ°€ λ³΄μΌ μ μμ

### Trap Listener (μ„λ²„)
- μ—­ν• : μ„λ²„κ°€ λ΅μ»¬μ—μ„ Trapμ„ μμ‹  λ€κΈ°
- ν¬νΈ μ‚¬μ©: κ³ μ • ν¬νΈ 162μ— λ°”μΈλ”©
- netstat ν‘μ‹: LISTENING μƒνƒλ΅ λ‚νƒ€λ‚μ•Ό ν•¨
  - `UDP 0.0.0.0:162 *:*` λλ” `UDP 127.0.0.1:162 *:*`

## ν„μ¬ μƒν™©

- 161 ν¬νΈ: μ›κ²© μ¥λΉ„(SNMP Agent)μ—μ„ LISTENING μ¤‘μ΄λ―€λ΅ λ΅μ»¬ netstatμ— λ³΄μ΄μ§€ μ•λ” κ²ƒμ΄ μ •μƒ
- 162 ν¬νΈ: λ΅μ»¬ TrapListenerκ°€ LISTENING μ¤‘μ΄μ–΄μ•Ό ν•λ”λ° netstatμ— μ—†μ β†’ TrapListenerκ°€ ν¬νΈμ— λ°”μΈλ”©λμ§€ μ•μ

## ν™•μΈ λ°©λ²•

Event Logμ—μ„ λ‹¤μμ„ ν™•μΈν•μ„Έμ”:
- "[System] Trap Listener started on ..." β†’ μ •μƒ μ‹μ‘
- "[System] Failed to start Trap Listener: ..." β†’ μ‹μ‘ μ‹¤ν¨

μ‹μ‘ μ‹¤ν¨ μ‹ Visual Studio Output μ°½μ λ””λ²„κ·Έ λ΅κ·Έλ¥Ό ν™•μΈν•μ„Έμ”. ν¬νΈ 162 λ°”μΈλ”© μ‹¤ν¨ μ›μΈμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.